{"version":3,"file":"entity-details-modal-Bgwf6bUr.js","sources":["../../src/components/entity-details-modal.ts"],"sourcesContent":["/**\n * EntityDetailsModal component\n * Shows detailed diagnostics for an entity\n */\n\nimport { LitElement, html, css } from 'lit';\nimport { customElement, property } from 'lit/decorators.js';\nimport { sharedStyles } from '../styles/shared-styles';\nimport { formatNumber, formatDuration } from '../services/formatters';\nimport type { StorageEntity } from '../types';\n\n@customElement('entity-details-modal')\nexport class EntityDetailsModal extends LitElement {\n  @property({ type: Object }) entity: StorageEntity | null = null;\n\n  static styles = [\n    sharedStyles,\n    css`\n      .details-section {\n        margin-bottom: 24px;\n      }\n\n      .details-section:last-child {\n        margin-bottom: 0;\n      }\n\n      .details-section h3 {\n        margin: 0 0 12px 0;\n        font-size: 16px;\n        font-weight: 500;\n        color: var(--primary-text-color);\n        padding-bottom: 8px;\n        border-bottom: 1px solid var(--divider-color);\n      }\n\n      .details-grid {\n        display: grid;\n        grid-template-columns: auto 1fr;\n        gap: 8px 16px;\n      }\n\n      .detail-label {\n        font-weight: 500;\n        color: var(--secondary-text-color);\n      }\n\n      .detail-value {\n        color: var(--primary-text-color);\n      }\n\n      .detail-value.clickable {\n        color: var(--primary-color);\n        cursor: pointer;\n      }\n\n      .detail-value.clickable:hover {\n        text-decoration: underline;\n      }\n\n      .status-indicator {\n        display: inline-block;\n        width: 10px;\n        height: 10px;\n        border-radius: 50%;\n        margin-right: 8px;\n      }\n\n      .status-available {\n        background: var(--success-color, #4CAF50);\n      }\n\n      .status-unavailable {\n        background: var(--warning-color, #FF9800);\n      }\n\n      .status-unknown {\n        background: var(--error-color, #F44336);\n      }\n\n      .reason-box {\n        background: var(--secondary-background-color);\n        padding: 12px;\n        border-radius: 4px;\n        margin-top: 8px;\n        font-size: 13px;\n      }\n    `\n  ];\n\n  private handleClose() {\n    this.dispatchEvent(new CustomEvent('close-modal', {\n      bubbles: true,\n      composed: true\n    }));\n  }\n\n  private handleOpenMoreInfo() {\n    if (!this.entity) return;\n\n    // Close the details modal first\n    this.handleClose();\n\n    // Then open HA's more-info dialog\n    this.dispatchEvent(new CustomEvent('open-more-info', {\n      detail: { entityId: this.entity.entity_id },\n      bubbles: true,\n      composed: true\n    }));\n  }\n\n  private renderStatusIndicator() {\n    if (!this.entity) return '';\n\n    let statusClass = 'status-unknown';\n    if (this.entity.state_status === 'Available') {\n      statusClass = 'status-available';\n    } else if (this.entity.state_status === 'Unavailable') {\n      statusClass = 'status-unavailable';\n    }\n\n    return html`<span class=\"status-indicator ${statusClass}\"></span>`;\n  }\n\n  render() {\n    if (!this.entity) return html``;\n\n    return html`\n      <div class=\"modal-overlay\" @click=${this.handleClose}>\n        <div class=\"modal-content\" @click=${(e: Event) => e.stopPropagation()} style=\"max-width: 600px;\">\n          <div class=\"modal-header\">\n            <h2>Entity Details</h2>\n            <button class=\"modal-close\" @click=${this.handleClose}>&times;</button>\n          </div>\n\n          <div class=\"modal-body\">\n            <!-- Entity Identity -->\n            <div class=\"details-section\">\n              <h3>Entity Information</h3>\n              <div class=\"details-grid\">\n                <span class=\"detail-label\">Entity ID:</span>\n                <span class=\"detail-value clickable\" @click=${this.handleOpenMoreInfo}>\n                  ${this.entity.entity_id}\n                </span>\n\n                ${this.entity.platform ? html`\n                  <span class=\"detail-label\">Platform:</span>\n                  <span class=\"detail-value\">${this.entity.platform}</span>\n                ` : ''}\n\n                ${this.entity.device_name ? html`\n                  <span class=\"detail-label\">Device:</span>\n                  <span class=\"detail-value\">\n                    ${this.entity.device_name}\n                    ${this.entity.device_disabled ? ' (disabled)' : ''}\n                  </span>\n                ` : ''}\n\n                ${this.entity.config_entry_title ? html`\n                  <span class=\"detail-label\">Integration:</span>\n                  <span class=\"detail-value\">\n                    ${this.entity.config_entry_title}\n                    ${this.entity.config_entry_state ? ` (${this.entity.config_entry_state})` : ''}\n                  </span>\n                ` : ''}\n              </div>\n            </div>\n\n            <!-- Status -->\n            <div class=\"details-section\">\n              <h3>Current Status</h3>\n              <div class=\"details-grid\">\n                <span class=\"detail-label\">State:</span>\n                <span class=\"detail-value\">\n                  ${this.renderStatusIndicator()}\n                  ${this.entity.state_status}\n                </span>\n\n                <span class=\"detail-label\">Registry:</span>\n                <span class=\"detail-value\">${this.entity.registry_status}</span>\n              </div>\n\n              ${this.entity.availability_reason ? html`\n                <div class=\"reason-box\">\n                  <strong>Reason:</strong> ${this.entity.availability_reason}\n                </div>\n              ` : ''}\n\n              ${this.entity.unavailable_duration_seconds ? html`\n                <div class=\"reason-box\">\n                  <strong>Duration:</strong> ${formatDuration(this.entity.unavailable_duration_seconds)}\n                </div>\n              ` : ''}\n            </div>\n\n            <!-- States Table -->\n            <div class=\"details-section\">\n              <h3>States Table</h3>\n              <div class=\"details-grid\">\n                <span class=\"detail-label\">In states_meta:</span>\n                <span class=\"detail-value\">${this.entity.in_states_meta ? '✓ Yes' : '✗ No'}</span>\n\n                <span class=\"detail-label\">In states:</span>\n                <span class=\"detail-value\">${this.entity.in_states ? '✓ Yes' : '✗ No'}</span>\n\n                <span class=\"detail-label\">State records:</span>\n                <span class=\"detail-value\">${formatNumber(this.entity.states_count)}</span>\n\n                ${this.entity.last_state_update ? html`\n                  <span class=\"detail-label\">Last update:</span>\n                  <span class=\"detail-value\">${this.entity.last_state_update}</span>\n                ` : ''}\n              </div>\n            </div>\n\n            <!-- Update Frequency -->\n            ${this.entity.update_interval ? html`\n              <div class=\"details-section\">\n                <h3>Update Frequency</h3>\n                <div class=\"details-grid\">\n                  <span class=\"detail-label\">Message interval:</span>\n                  <span class=\"detail-value\">${this.entity.update_interval}</span>\n\n                  ${this.entity.update_count_24h ? html`\n                    <span class=\"detail-label\">Updates (24h):</span>\n                    <span class=\"detail-value\">${formatNumber(this.entity.update_count_24h)}</span>\n                  ` : ''}\n                </div>\n              </div>\n            ` : ''}\n\n            <!-- Statistics Table -->\n            <div class=\"details-section\">\n              <h3>Statistics Table</h3>\n              <div class=\"details-grid\">\n                <span class=\"detail-label\">In statistics_meta:</span>\n                <span class=\"detail-value\">${this.entity.in_statistics_meta ? '✓ Yes' : '✗ No'}</span>\n\n                <span class=\"detail-label\">In short-term:</span>\n                <span class=\"detail-value\">${this.entity.in_statistics_short_term ? '✓ Yes' : '✗ No'}</span>\n\n                <span class=\"detail-label\">In long-term:</span>\n                <span class=\"detail-value\">${this.entity.in_statistics_long_term ? '✓ Yes' : '✗ No'}</span>\n\n                <span class=\"detail-label\">Short-term records:</span>\n                <span class=\"detail-value\">${formatNumber(this.entity.stats_short_count)}</span>\n\n                <span class=\"detail-label\">Long-term records:</span>\n                <span class=\"detail-value\">${formatNumber(this.entity.stats_long_count)}</span>\n\n                ${this.entity.last_stats_update ? html`\n                  <span class=\"detail-label\">Last update:</span>\n                  <span class=\"detail-value\">${this.entity.last_stats_update}</span>\n                ` : ''}\n              </div>\n            </div>\n\n            <!-- Statistics Eligibility -->\n            ${this.entity.statistics_eligibility_reason ? html`\n              <div class=\"details-section\">\n                <h3>Statistics Eligibility</h3>\n                <div class=\"reason-box\">\n                  ${this.entity.statistics_eligibility_reason}\n                </div>\n              </div>\n            ` : ''}\n          </div>\n\n          <div class=\"modal-footer\">\n            <button @click=${this.handleOpenMoreInfo}>Open More Info</button>\n            <button class=\"secondary-button\" @click=${this.handleClose}>Close</button>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n}\n"],"names":["LitElement","html","css","property","customElement"],"mappings":"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"}